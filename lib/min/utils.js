'use strict';var _createClass=(function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value' in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}})();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else {return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}(function(){var Sand=window.Sand=window.Sand||{};var u=Sand.Utils={};var _power=Math.pow;u.doUntil=function(expectedValue,execute,callback,_status){var result=execute(),status=_status||{'end':false};if(result===expectedValue){status['end']=true;callback&&callback()}else if(!status['end']){requestAnimationFrame(u.doUntil.bind(null,expectedValue,execute,callback,status))}return status};u.addDragEvents=function(target,handlers){function touchToClick(evtHandler){if(!evtHandler)return;return function(e){var eCopy={};eCopy.offsetX=e.offsetX||e.targetTouches.item(0).clientX;eCopy.offsetY=e.offsetY||e.targetTouches.item(0).clientY;return evtHandler(eCopy)}}var startHandler=touchToClick(handlers['start']);var moveHandler=touchToClick(handlers['move']);var endHandler=touchToClick(handlers['end']);if(startHandler){target.addEventListener('mousedown',startHandler);target.addEventListener('touchstart',startHandler)}if(moveHandler){target.addEventListener('mousemove',moveHandler);target.addEventListener('touchmove',moveHandler)}if(endHandler){target.addEventListener('mouseup',endHandler);target.addEventListener('touchend',endHandler)}};u.Vector=(function(){function _class(){var x=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var y=arguments.length<=1||arguments[1]===undefined?0:arguments[1];_classCallCheck(this,_class);this.pos=new Float64Array([x,y])}_createClass(_class,[{key:'x',value:function x(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val){this.pos[0]=val;return this}return this.pos[0]}},{key:'y',value:function y(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val){this.pos[1]=val;return this}return this.pos[1]}},{key:'set',value:function set(newPos){this.pos.set(newPos);return this}},{key:'get',value:function get(){return this.pos}},{key:'toArray',value:function toArray(){return [this.pos[0],this.pos[1]]}},{key:'dup',value:function dup(){return new (Function.prototype.bind.apply(u.Vector,[null].concat(_toConsumableArray(this.pos))))}},{key:'distanceTo',value:function distanceTo(coordArr){return Math.sqrt(_power(this.pos[0]-coordArr[0],2)+_power(this.pos[1]-coordArr[1],2))}}]);return _class})();u.Color=(function(){function _class2(h,s,l){var a=arguments.length<=3||arguments[3]===undefined?1:arguments[3];_classCallCheck(this,_class2);if(s<0||s>100)throw new RangeError('saturation must be between 0 and 100');if(l<0||l>100)throw new RangeError('lightness must be between 0 and 100');if(a<0||a>1)throw new RangeError('alpha must be between 0 and 1');this._h=h%360;this._s=s;this._l=l;this._a=a}_createClass(_class2,[{key:'hue',value:function hue(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val!==null){this._h=val%360;this._h+=360*(this._h<0);return this}return this._h}},{key:'saturation',value:function saturation(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val!==null){if(val<0||val>100)throw new RangeError('saturation must be between 0 and 100');this._s=val;return this}return this._s}},{key:'lightness',value:function lightness(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val!==null){if(val<0||val>100)throw new RangeError('lightness must be between 0 and 100');this._l=val;return this}return this._l}},{key:'alpha',value:function alpha(){var val=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(val!==null){if(val<0||val>1)throw new RangeError('alpha must be between 0 and 1');this._a=val;return this}return this._a}},{key:'rotate',value:function rotate(amount){this.hue(this.hue()+amount);return this}},{key:'invert',value:function invert(){var newColor=this.dup();newColor.rotate(150).lightness(100-this._l);return newColor}},{key:'toString',value:function toString(){return 'hsla('+this._h+', '+this._s+'%, '+this._l+'%, '+this._a+')'}},{key:'dup',value:function dup(){return new u.Color(this._h,this._s,this._l,this._a)}}]);return _class2})()})();